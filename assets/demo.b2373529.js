import{l as e,k as a,j as s,e as t,h as o,o as n,c as r,b as l,r as c,F as d,n as i,d as u,t as p,A as m,B as k,C as g,p as v,v as y}from"./app.3288cba1.js";import"./type.925d599a.js";import{u as h}from"./index.ada78e1d.js";const x={page:{index:1,size:10},search:{text:"",isReg:!1,keys:[]},sort:{key:"",direction:"ascend",compareFn:function(e,a){return e<a?-1:1}}};const b={},f={t:"1603888743183",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3090",width:"16",height:"16"},w=l("path",{d:"M512 885.6L63.6 138.4h896.8L512 885.6z","p-id":"3091",fill:"currentColor"},null,-1);b.render=function(e,a){return n(),r("svg",f,[w])};var C={components:{SortIcon:b},props:{columns:Object,data:Array,sort:Object},setup:e=>({onHeaderClick:function(a,s){e.sort.key=a,e.sort.direction=s}})};const L=m("data-v-64dbe56d")(((e,a,s,t,o,m)=>{const k=c("SortIcon");return n(),r("div",{style:{display:"grid",gridTemplateColumns:`repeat(${Object.keys(s.columns).length}, 1fr)`}},[(n(!0),r(d,null,i(s.columns,((e,a)=>(n(),r("span",{key:a,class:"column sortable-header"},[u(p(e)+" ",1),l(k,{class:["icon",s.sort.key===a?"active":"",s.sort.direction],onClick:e=>t.onHeaderClick(a,"ascend"===s.sort.direction?"descend":"ascend")},null,8,["class","onClick"])])))),128)),(n(!0),r(d,null,i(s.data,((e,a)=>(n(),r(d,null,[(n(!0),r(d,null,i(s.columns,((s,t)=>(n(),r("span",{key:t+a,class:"row"},p(e[t]),1)))),128))],64)))),256))],4)}));C.render=L,C.__scopeId="data-v-64dbe56d";var z={props:{modelValue:Number,total:Number,size:Number},setup:(e,{emit:a})=>({onClick:function(e){a("update:modelValue",e)},totalPage:s((()=>Math.ceil(e.total/e.size)))})};const N=m("data-v-c6e42116");k("data-v-c6e42116");const P={style:{display:"flex",margin:"10px 0"}};g();const j=N(((e,a,s,t,o,l)=>(n(),r("div",P,[(n(!0),r(d,null,i(Array(t.totalPage),((e,a)=>(n(),r("div",{class:["page-item",s.modelValue===a+1?"active":""],key:a,onClick:e=>t.onClick(a+1)},p(a+1),11,["onClick"])))),128))]))));z.render=j,z.__scopeId="data-v-c6e42116";const S={key:"index",name:"name",age:"age",address:"address",score:"score"},V=[{key:"1",name:"John Brown",age:32,address:"New York No. 1 Lake Park",score:5},{key:"2",name:"Jim Green",age:42,address:"London No. 1 Lake Park",score:2},{key:"3",name:"Joe Black",age:32,address:"Sidney No. 1 Lake Park",score:1},{key:"4",name:"Am",age:22,address:"Sidney No. 1 Lake Park",score:8},{key:"5",name:"Joe Red",age:19,address:"Sidney No. 1 Lake Park",score:6},{key:"6",name:"Joe Dendi",age:39,address:"Sidney No. 1 Lake Park",score:0}];var J={components:{MyTable:C,Pagination:z},setup(){const{pagedData:n,page:r,total:l,search:c,sort:d}=function(n,r){const{page:l,sort:c,search:d}=e.merge({},x,r),i=a(n)?n:s((()=>n)),u=t(l),p=t(c),m=t(d),k=h((()=>m.value.text),{wait:500}),g=s((()=>{let e=[...i.value];const a=k.value.trim();return a&&(e=e.filter((e=>{var s;let t="";if(t=(null==(s=m.value.keys)?void 0:s.length)?m.value.keys.map((a=>e[a])).join(" "):JSON.stringify(e),m.value.isReg)try{return Boolean(t.match(new RegExp(a)))}catch(o){}return t.toLocaleLowerCase().includes(a.toLocaleLowerCase())}))),p.value.key&&e.sort(((e,a)=>{const s=p.value.key,t=p.value.compareFn(e[s],a[s]);return"ascend"===p.value.direction?t:-1*t})),e})),v=s((()=>g.value.length)),y=s((()=>{let e=[...g.value];const a=(u.value.index-1)*u.value.size,s=a+u.value.size;return e=e.slice(a,s),e}));return o((()=>n),(()=>{m.value.text=""})),o((()=>u.value.size),(()=>{u.value.index=1}),{immediate:!1}),o((()=>g.value),(()=>{u.value.index=1})),{data:i,page:u,search:m,sort:p,pagedData:y,total:v}}(V,{page:{size:5},sort:{key:"score",direction:"descend"}});return{pagedData:n,page:r,total:l,columns:S,search:c,sort:d}}};const B={style:{"margin-bottom":"12px"}};J.render=function(e,a,s,t,o,d){const i=c("MyTable"),u=c("Pagination");return n(),r("div",null,[l("div",B,[v(l("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>t.search.text=e),placeholder:"search"},null,512),[[y,t.search.text]])]),l(i,{columns:t.columns,data:t.pagedData,sort:t.sort},null,8,["columns","data","sort"]),l(u,{modelValue:t.page.index,"onUpdate:modelValue":a[2]||(a[2]=e=>t.page.index=e),total:t.total,size:t.page.size},null,8,["modelValue","total","size"])])};export{J as _};
