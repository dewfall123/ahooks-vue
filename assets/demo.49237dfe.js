var a=Object.prototype.hasOwnProperty,e=Object.getOwnPropertySymbols,t=Object.prototype.propertyIsEnumerable,n=Object.assign;import{k as r,l as i,r as l,w as o,o as u,c as p,F as c,q as s,h as g,y as d,e as m,f,z,j as S}from"./app.127dcd3e.js";import"./type.fa943275.js";import{u as y,R as v}from"./index.6cb45c91.js";const b={current:1,pageSize:10};function P(u,p={}){var c,s,g;let d={};r()&&(d=null!=(c=i(v))?c:{});const m=n(n({defaultPagination:b},d),p),f=l({current:m.defaultPagination.current,pageSize:m.defaultPagination.pageSize,total:null!=(g=(null!=(s=m.initialData)?s:[]).length)?g:0,totalPage:0}),z=y(u,n(n({defaultParams:[{current:f.current,pageSize:f.pageSize}]},m),{onSuccess(a){f.total=a.total,f.totalPage=Math.ceil(a.total/f.pageSize)}})),{data:S,run:P,params:h}=z,j=((n,r)=>{var i={};for(var l in n)a.call(n,l)&&r.indexOf(l)<0&&(i[l]=n[l]);if(null!=n&&e)for(var l of e(n))r.indexOf(l)<0&&t.call(n,l)&&(i[l]=n[l]);return i})(z,["data","run","params"]);return o([()=>f.current,()=>f.pageSize],(()=>{P(f,...h.value.slice(1))})),n({data:S,pagination:f,run:P,params:h},j)}var h={props:{total:Number,current:Number,pageSize:{type:Number,default:10}},emits:["update:current"],setup:(a,{emit:e})=>({changeCurrent:function(t){t!==a.current&&e("update:current",t)}})};h.render=function(a,e,t,n,r,i){return u(),p("div",null,[(u(!0),p(c,null,s(Array(Math.ceil(t.total/t.pageSize)),((a,e)=>(u(),p("button",{key:e,onClick:a=>n.changeCurrent(e+1),style:{marginRight:"4px",color:t.current===e+1?"#407cff":""}},g(e+1),13,["onClick"])))),128))])};async function j(a){return new Promise((e=>{setTimeout((()=>{var t;e((a.current,t=a.pageSize,d.mock({total:55,[`list|${t}`]:[{id:"@guid",name:"@cname","gender|1":["male","female"],email:"@email",disabled:!1}]})))}),1e3)}))}var O={components:{Pagination:h},setup(){const{pagination:a,loading:e,data:t}=P((({current:a,pageSize:e})=>j({current:a,pageSize:e})));return{pagination:a,loading:e,data:t}}};const k={key:0,style:{"font-size":"14px"}},x=S(" - ");O.render=function(a,e,t,n,r,i){var l;const o=m("Pagination");return u(),p("div",null,[f("p",null,"loading: "+g(n.loading),1),f(o,{current:n.pagination.current,"onUpdate:current":e[1]||(e[1]=a=>n.pagination.current=a),pageSize:n.pagination.pageSize,"onUpdate:pageSize":e[2]||(e[2]=a=>n.pagination.pageSize=a),total:n.pagination.total},null,8,["current","pageSize","total"]),!n.loading&&n.data?(u(),p("ul",k,[(u(!0),p(c,null,s(null==(l=n.data)?void 0:l.list,(a=>(u(),p("li",{key:a.id},[f("span",null,g(a.name),1),x,f("span",null,g(a.email),1)])))),128))])):z("",!0)])};export{O as _};
